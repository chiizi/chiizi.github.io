<!DOCTYPE html>
<html>
  <head>
    <title>
      Survive
    </title>
    <style>
      body {
        background: #000;
      }
      * {
        color: #FFF;
        font-family: monospace;
      }
    </style>
  </head>
  <body>
    <io-out></io-out>
    <script>
      var out = (str => str.split("\n").map(function(str) {
        var div = document.createElement("div");
        div.innerHTML = str;
        document.querySelector("io-out").appendChild(div);
      }));
      (function init() {
        out("CRUDE EVOLUTION SIMULATOR\n(c) HANS FELDE 2015\ngenerating creatures...");
        var creatures = Array(50).fill().map(_=>Math.round(Math.random() * 4294967295));
        out("done.")
        var _cull = (a => a.splice((a.indexOf(Math.min.apply(Math, a))), 1).toString());
        var _breed = function(a) {
          var child = Array(2).fill().map(_=>(a[Math.round(Math.random() * a.length)]).toString(16));
          var str = "";
          for (var i = 0; i < 8; i++) {
            str += (!!Math.round(Math.random()) ? child[0][i] : child[1][i]);
          }
          a.push(parseInt(str, 16));
          return str;
        };
        (function main() {
          var cull = _cull(creatures);
          var bred = _breed(creatures);
          out("CULLED: " + cull.toString(16) + ", NEW: " + bred + ", AVERAGE DISTANCE FROM PERFECTION: " + (function(a) {
            var ret = 0;
            a.map((_,i,a)=>ret+=a[i]);
            return ret / a.length;
          })(creatures));
          requestAnimationFrame(main);
        })();
      })();
    </script>
  </body>
</html>
