<script>
  var ampersand = {};
  ampersand.lex = function(s) {
    var i = 0;
    var c = "\u0000";
    var tokens = [];
    var token = "";
    var type = 0;
    for (i = 0; i < s.length; i++) {
      console.log(c = s[i]);
      switch (c) {
        case " ":
          if (token) tokens.push(token);
          token = "";
          break;
        case "(":
        case ")":
          if (token) tokens.push(token);
          token = "";
          tokens.push(c);
          break;
        default:
          token += c;
      }
    }
    if (token) {
      tokens.push(token);
    }
    return tokens;
  };
  ampersand.parse = function(a) {
    var queue = [[]];
    a.map(function(s) {
      console.log(JSON.stringify(queue));
      if (s == "(") {
        queue.push([]);
      } else if (s == ")") {
        var value = queue.pop();
        queue[queue.length - 1].push(value);
      } else {
        queue[queue.length - 1].push(s);
      }
    });
    return queue[0];
  };
</script>
