<!DOCTYPE html>
<html>
  <head>
    <title>Posts</title>
    <meta charset="UTF-8" />
    <style>
      * + *:not(body) {
        margin-top: 10px;
      }
      * {
        padding: 10px;
        margin: 0;
        font-family: monospace;
        outline: none;
      }
      html, span {
        padding: 0;
      }
      .gray {
        background: rgba(0, 0, 0, 0.1);
        border: 1px solid #333;
      }
      .author {
        color: #444;
      }
    </style>
  </head>
  <body>
    <div class="new gray">
      <div class="in gray" contenteditable="plaintext-only"></div>
    </div>
    <div class="feed gray"></div>
    <script>
      document.querySelector(".new .in").onkeypress = function(e) {
        if (e.keyCode == 13) {
          addPost(name, this.innerHTML);
          this.innerHTML = "";
          return false;
        } else {
          return true;
        }
      };
      var addPost = function(name, content) {
        var post = document.createElement("div");
        post.className = "post gray";
        post.appendChild(document.createTextNode(content));
        post.appendChild(document.createElement("br"));
        var author = document.createElement("span");
        author.className = "author";
        author.appendChild(document.createTextNode(("by " + name + " @ " + new Date(Date.now()).toString())));
        post.appendChild(author);
        document.querySelector(".feed").insertBefore(post, document.querySelector(".feed").childNodes[0]);
      };
      var name = "anon n (where n >= 0)";
    </script>
  </body>
</html>
<!--
        .replace(/[\u00A0-\u9999<>\&]/gim, function(i) {
          return "&#" + i.charCodeAt(0) + ";";
        })
-->
